webpackJsonp([1],{111:function(t,a){},112:function(t,a){},116:function(t,a,e){e(111);var o=e(45)(e(70),e(117),null,null);t.exports=o.exports},117:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"card mb-3"},[e("div",{staticClass:"card-block d-flex"},[e("div",{staticStyle:{width:"90px","margin-right":"20px"}},[e("a",{attrs:{href:t.toot.account.url}},[e("img",{staticStyle:{"border-radius":"50%",width:"100%"},attrs:{src:t.toot.account.avatar,alt:"avatar"}})])]),t._v(" "),e("div",{staticStyle:{width:"100%"}},[e("div",{staticClass:"d-flex"},[e("a",{attrs:{href:t.toot.account.url,title:t.toot.account.note}},[e("div",[t._v(t._s(t.toot.account.display_name)+" @"+t._s(t.toot.account.username))])]),t._v(" "),e("a",{staticClass:"ml-auto",attrs:{href:t.toot.url}},[t._v(t._s(t.date))])]),t._v(" "),e("div",{domProps:{innerHTML:t._s(t.toot.content)}}),t._v(" "),t.toot.media_attachments.length?e("div",[t.toot.sensitive&&!t.allowSensitive?e("div",{staticClass:"text-center",staticStyle:{width:"100%",background:"#303030",color:"aliceblue",padding:"60px"},on:{click:function(a){t.allowSensitive=!0}}},[t._v("\n                    Sensitive content (click to show)\n                ")]):e("div",t._l(t.toot.media_attachments,function(t){return e("a",{attrs:{href:t.url}},[e("img",{attrs:{src:t.preview_url,alt:""}})])}))]):t._e()])])])},staticRenderFns:[]}},118:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"app"}},[e("div",{staticClass:"container"},[e("h1",[t._v("PTL Viewer")]),t._v(" "),t._m(0),t._v(" "),t.error?e("div",{staticClass:"alert alert-warning"},[t._v(t._s(t.error))]):t._e(),t._v(" "),e("form",{attrs:{action:"post"},on:{submit:function(a){a.preventDefault(),t.submit(a)}}},[e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col col-md-2",attrs:{for:"domain"}},[t._v("Domain")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.domain,expression:"domain"}],staticClass:"form-control col col-md-4",attrs:{type:"text",placeholder:"mstdn.jp",id:"domain"},domProps:{value:t.domain},on:{input:function(a){a.target.composing||(t.domain=a.target.value)}}}),t._v(" "),e("div",{staticClass:"col col-md-6"},[e("input",{staticClass:"btn btn-primary",attrs:{type:"submit",value:"Load"}}),t._v(" "),e("label",{staticClass:"custom-control custom-checkbox ml-3"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.local,expression:"local"}],staticClass:"custom-control-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.local)?t._i(t.local,null)>-1:t.local},on:{__c:function(a){var e=t.local,o=a.target,n=!!o.checked;if(Array.isArray(e)){var r=t._i(e,null);n?r<0&&(t.local=e.concat(null)):r>-1&&(t.local=e.slice(0,r).concat(e.slice(r+1)))}else t.local=n}}}),t._v(" "),e("span",{staticClass:"custom-control-indicator"}),t._v(" "),e("span",{staticClass:"custom-control-description"},[t._v("Local")])])])])]),t._v(" "),e("div",[t._l(t.toots,function(t){return e("div",{key:t.id},[e("Toot",{attrs:{toot:t}})],1)}),t._v(" "),t.currentUri&&!t.loading?e("div",{staticClass:"text-center",staticStyle:{cursor:"pointer"},on:{click:function(a){a.preventDefault(),t.loadMore(a)}}},[t._v("more")]):t._e()],2)])])},staticRenderFns:[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("p",{staticClass:"lead"},[t._v("\n          マストドンの公開タイムラインをみるやつ。inspired by "),e("a",{attrs:{href:"http://junk.azyobuzi.net/mastodonptl/"}},[t._v("junk.azyobuzi.net/mastodonptl/")])])}]}},47:function(t,a){},48:function(t,a,e){e(112);var o=e(45)(e(69),e(118),null,null);t.exports=o.exports},68:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=e(49),n=e(48),r=e.n(n),i=e(47);e.n(i);o.a.config.productionTip=!1,new o.a({el:"#app",template:"<App/>",components:{App:r.a}})},69:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=e(72),n=e.n(o),r=e(73),i=e.n(r),s=e(74),c=e.n(s),l=e(116),u=e.n(l),d=e(50),v=e.n(d);a.default={data:function(){return{toots:[],domain:"",local:!1,loading:!1,currentUri:null,error:""}},name:"app",components:{Toot:u.a},mounted:function(){var t=this;if(!window.URLSearchParams)return void(this.error="お使いのブラウザーはURLSearchParamsに対応していないため、このアプリケーションは利用できません。最新の Chrome または Firefox をご利用ください。");setInterval(function(){if(t.currentUri&&!t.loading&&t.toots.length){var a=t.currentUri;a.searchParams.delete("max_id"),a.searchParams.append("since_id",t.toots[0].id),v.a.get(a.href).then(function(a){var e;(e=t.toots).unshift.apply(e,c()(a.data))})}},3e4)},computed:{apiUri:function(){var t=new URL(i()(this.domain,"://")?this.domain:"https://"+this.domain);return t.pathname="/api/v1/timelines/public",t}},methods:{submit:function(){var t=this;this.error="",this.toots=[],this.loading=!0,n.a.resolve().then(function(){if(!i()(t.domain,"."))throw new Error("Invalid domain");console.log(t.apiUri);var a=t.apiUri;return t.currentUri=a,console.log(a.searchParams),a.searchParams.append("limit",40),t.local&&a.searchParams.append("local",!0),v.a.get(a.href)}).then(function(a){console.log(a.data),t.toots=a.data,t.loading=!1}).catch(function(a){t.error=a.message})},loadMore:function(){var t=this;this.loading=!0,n.a.resolve().then(function(){var a=t.currentUri;return a.searchParams.delete("since_id"),a.searchParams.append("max_id",t.toots[t.toots.length-1].id),console.log(a.href),v.a.get(a.href)}).then(function(a){var e;(e=t.toots).push.apply(e,c()(a.data)),t.loading=!1}).catch(function(a){t.error=a.message,t.loading=!1})}}}},70:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={props:{toot:Object},data:function(){return{allowSensitive:!1}},computed:{date:function(){var t=new Date(this.toot.created_at);return t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}}}}},[68]);
//# sourceMappingURL=app.bfcf8c5673b2e094135c.js.map