webpackJsonp([1],{111:function(t,e){},112:function(t,e){},113:function(t,e){},117:function(t,e,a){a(111),a(112);var o=a(45)(a(70),a(118),"data-v-1efee668",null);t.exports=o.exports},118:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card mb-3"},[a("div",{staticClass:"card-block d-flex"},[a("div",{staticStyle:{width:"90px","margin-right":"20px"}},[a("a",{attrs:{href:t.toot.account.url}},[a("img",{staticStyle:{"border-radius":"50%",width:"100%"},attrs:{src:t.toot.account.avatar,alt:"avatar"}})])]),t._v(" "),a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"d-flex toot-header"},[a("a",{attrs:{href:t.toot.account.url,title:t.toot.account.note}},[a("div",[t._v(t._s(t.toot.account.display_name)+" @"+t._s(t.toot.account.username))])]),t._v(" "),a("a",{staticClass:"ml-auto text-right date",attrs:{href:t.toot.url}},[t._v(t._s(t.date))])]),t._v(" "),a("div",{domProps:{innerHTML:t._s(t.toot.content)}}),t._v(" "),t.toot.media_attachments.length?a("div",[t.toot.sensitive&&!t.allowSensitive?a("div",{staticClass:"text-center sensitive",on:{click:function(e){t.allowSensitive=!0}}},[t._v("\n                    Sensitive content (click to show)\n                ")]):a("div",t._l(t.toot.media_attachments,function(t){return a("a",{attrs:{href:t.url}},[a("img",{staticClass:"img-fluid img-thumbnail",attrs:{src:t.preview_url,alt:""}})])}))]):t._e()])])])},staticRenderFns:[]}},119:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"container"},[a("h1",[t._v("PTL Viewer")]),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),t.error?a("div",{staticClass:"alert alert-warning"},[t._v(t._s(t.error))]):t._e(),t._v(" "),a("form",{attrs:{action:"post"},on:{submit:function(e){e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-4 col-md-2",attrs:{for:"domain"}},[t._v("Domain")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.domain,expression:"domain"}],staticClass:"form-control col-8 col-md-4",attrs:{type:"text",placeholder:"mstdn.jp",id:"domain"},domProps:{value:t.domain},on:{input:function(e){e.target.composing||(t.domain=e.target.value)}}}),t._v(" "),a("div",{staticClass:"col-12 col-md-6"},[a("input",{staticClass:"btn btn-primary",attrs:{type:"submit",value:"Load"}}),t._v(" "),a("label",{staticClass:"custom-control custom-checkbox ml-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.local,expression:"local"}],staticClass:"custom-control-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.local)?t._i(t.local,null)>-1:t.local},on:{__c:function(e){var a=t.local,o=e.target,n=!!o.checked;if(Array.isArray(a)){var i=t._i(a,null);n?i<0&&(t.local=a.concat(null)):i>-1&&(t.local=a.slice(0,i).concat(a.slice(i+1)))}else t.local=n}}}),t._v(" "),a("span",{staticClass:"custom-control-indicator"}),t._v(" "),a("span",{staticClass:"custom-control-description"},[t._v("Local")])])])])]),t._v(" "),a("div",[t._l(t.toots,function(t){return a("div",{key:t.id},[a("Toot",{attrs:{toot:t}})],1)}),t._v(" "),t.currentUri&&!t.loading?a("div",{staticClass:"text-center",staticStyle:{cursor:"pointer"},on:{click:function(e){e.preventDefault(),t.loadMore(e)}}},[t._v("more")]):t._e()],2)])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"lead"},[t._v("\n          マストドンの公開タイムラインをみるやつ。inspired by "),a("a",{attrs:{href:"http://junk.azyobuzi.net/mastodonptl/"}},[t._v("junk.azyobuzi.net/mastodonptl/")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v("github: "),a("a",{attrs:{href:"https://github.com/hinaloe/public-toot-viewer"}},[a("span",{staticClass:"hidden-xs-down"},[t._v("hinaloe/")]),t._v("public-toot-viewer")]),t._v(" by "),a("a",{attrs:{href:"https://github.com/hinaloe/"}},[t._v("hinaloe")]),t._v(" on "),a("a",{attrs:{href:"https://mdn.hinaloe.net"}},[t._v("ひな丼")])])}]}},47:function(t,e){},48:function(t,e,a){a(113);var o=a(45)(a(69),a(119),null,null);t.exports=o.exports},68:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(49),n=a(48),i=a.n(n),r=a(47);a.n(r);o.a.config.productionTip=!1,new o.a({el:"#app",template:"<App/>",components:{App:i.a}})},69:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(72),n=a.n(o),i=a(73),r=a.n(i),s=a(74),c=a.n(s),l=a(117),u=a.n(l),d=a(50),v=a.n(d);e.default={data:function(){return{toots:[],domain:"",local:!1,loading:!1,currentUri:null,error:""}},name:"app",components:{Toot:u.a},mounted:function(){var t=this;if(!window.URLSearchParams)return void(this.error="お使いのブラウザーはURLSearchParamsに対応していないため、このアプリケーションは利用できません。最新の Chrome または Firefox をご利用ください。");setInterval(function(){if(t.currentUri&&!t.loading&&t.toots.length){var e=t.currentUri;e.searchParams.delete("max_id"),e.searchParams.append("since_id",t.toots[0].id),v.a.get(e.href).then(function(e){var a;(a=t.toots).unshift.apply(a,c()(e.data))})}},3e4)},computed:{apiUri:function(){var t=new URL(r()(this.domain,"://")?this.domain:"https://"+this.domain);return t.pathname="/api/v1/timelines/public",t}},methods:{submit:function(){var t=this;this.error="",this.toots=[],this.loading=!0,n.a.resolve().then(function(){if(!r()(t.domain,"."))throw new Error("Invalid domain");console.log(t.apiUri);var e=t.apiUri;return t.currentUri=e,console.log(e.searchParams),e.searchParams.append("limit",40),t.local&&e.searchParams.append("local",!0),v.a.get(e.href)}).then(function(e){console.log(e.data),t.toots=e.data,t.loading=!1}).catch(function(e){t.error=e.message})},loadMore:function(){var t=this;this.loading=!0,n.a.resolve().then(function(){var e=t.currentUri;return e.searchParams.delete("since_id"),e.searchParams.append("max_id",t.toots[t.toots.length-1].id),console.log(e.href),v.a.get(e.href)}).then(function(e){var a;(a=t.toots).push.apply(a,c()(e.data)),t.loading=!1}).catch(function(e){t.error=e.message,t.loading=!1})}}}},70:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{toot:Object},data:function(){return{allowSensitive:!1}},computed:{date:function(){var t=new Date(this.toot.created_at);return t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}}}}},[68]);
//# sourceMappingURL=app.d964b9a4cacb77b3b1d9.js.map